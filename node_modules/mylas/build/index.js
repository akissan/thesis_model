var ie=(e,t)=>()=>(e&&(t=e(e=0)),t);var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var f,a=ie(()=>{f=typeof document=="undefined"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href});var m=_(S=>{a();"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.Method=void 0;var ue;(function(e){e[e.loadFile=0]="loadFile",e[e.saveFile=1]="saveFile",e[e.loadJson=2]="loadJson",e[e.loadJsonComments=3]="loadJsonComments",e[e.saveJson=4]="saveJson",e[e.loadBuffer=5]="loadBuffer",e[e.saveBuffer=6]="saveBuffer"})(ue=S.Method||(S.Method={}))});var M=_(n=>{a();"use strict";var $=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});n.checkPerm=n.checkPath=n.checkDir=n.checkPathSync=void 0;var c=$(require("fs")),I=$(require("path")),ne=e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):(0,n.checkDir)(e)==!0;n.checkPathSync=ne;var oe=e=>{let t=I.default.parse(e),r=t.dir;return r==""||c.default.existsSync(r)||c.default.mkdirSync(t.dir,{recursive:!0}),!!c.default.existsSync(r)};n.checkDir=oe;var le=async e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):!((0,n.checkDir)(e)!=!0||await(0,n.checkPerm)(e)!=!0);n.checkPath=le;var ce=async e=>{let t=I.default.parse(e);return c.default.existsSync(e)&&await c.default.promises.access(e,c.default.constants.R_OK|c.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),await c.default.promises.access(t.dir,c.default.constants.R_OK|c.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),!0};n.checkPerm=ce});var W=_(p=>{a();"use strict";var fe=p&&p.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(r[s[u]]=e[s[u]]);return r};Object.defineProperty(p,"__esModule",{value:!0});var de=require("worker_threads"),_e=e=>{var{callback:t}=e,r=fe(e,["callback"]);return new Promise((s,u)=>{let l;new de.Worker("./build/worker.js").once("message",o=>l=o).once("exit",o=>o==0?s(l):u(o)).once("error",o=>u(o)).once("messageerror",o=>u(o)).postMessage(r)}).then(s=>(t==null||t(s),s),s=>{throw new Error(s)})};p.default=_e});var H=_(P=>{a();"use strict";var R=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});var K=R(require("fs")),L=m(),z=M(),G=R(W()),ve={load:async(e,t)=>{if(await(0,z.checkPath)(e)==!0){let r=await K.default.promises.readFile(e);return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,z.checkPath)(e)==!0)await K.default.promises.writeFile(e,t),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:async(e,t)=>{let r=await(0,G.default)({method:L.Method.loadBuffer,path:e});return t==null||t(Buffer.from(r)),Buffer.from(r)},saveW:async(e,t,r)=>{let s=new Uint8Array(new SharedArrayBuffer(t.byteLength));s.set(t),await(0,G.default)({method:L.Method.saveBuffer,path:e,data:s,callback:r})}};P.default=ve});var j=_(k=>{a();"use strict";var Q=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});var g=Q(require("fs")),T=m(),C=M(),V=Q(W()),he={loadS:e=>{if((0,C.checkPathSync)(e)==!0)return g.default.readFileSync(e,"utf8");throw new Error(`Can't read from ${e}`)},saveS:(e,t)=>{if((0,C.checkPathSync)(e)==!0)g.default.writeFileSync(e,t,"utf8");else throw new Error(`Can't write to ${e}`)},load:async(e,t)=>{if(await(0,C.checkPath)(e)==!0){let r=await g.default.promises.readFile(e,"utf8");return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,C.checkPath)(e)==!0)await g.default.promises.writeFile(e,t,"utf8"),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:(e,t)=>(0,V.default)({method:T.Method.loadFile,path:e,callback:t}),saveW:(e,t,r)=>(0,V.default)({method:T.Method.saveFile,path:e,data:t,callback:r})};k.default=he});var A=_(O=>{a();"use strict";var X=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});var E=m(),y=X(j()),Y=X(W()),ye={loadS:(e,t=!1)=>JSON.parse(t?Z(y.default.loadS(e)):y.default.loadS(e)),saveS:(e,t)=>y.default.saveS(e,JSON.stringify(t)),load:async(e,t,r=!1)=>{let s=JSON.parse(r?Z(await y.default.load(e)):await y.default.load(e));return t==null||t(s),s},save:async(e,t,r)=>{await y.default.save(e,JSON.stringify(t)),r==null||r()},loadW:(e,t,r=!1)=>(0,Y.default)({method:r?E.Method.loadJsonComments:E.Method.loadJson,path:e,callback:t}),saveW:(e,t,r)=>(0,Y.default)({method:E.Method.saveJson,path:e,data:t,callback:r})};O.default=ye;function Z(e){let t=(i,h)=>{let D=0;for(;i[h]==="\\";)h--,D++;return!(D%2)},r=!1,s=!1,u=!1,l=0,o="";for(let i=0;i<e.length;i++){let h=e[i]||"",D=e[i+1]||"",B=!(u||s);if(B&&h==='"'&&t(e,i-1)&&(r=!r),r)continue;let J=h+D;if(B&&J==="//")o+=e.slice(l,i),l=i,s=!0,i++;else if(s&&J===`\r
`){i++,s=!1,l=i;continue}else if(s&&h===`
`)s=!1,l=i;else if(B&&J==="/*"){o+=e.slice(l,i),l=i,u=!0,i++;continue}else if(u&&J==="*/"){i++,u=!1,l=i+1;continue}}return(o+(u||s?"":e.slice(l))).replace(/,(?!\s*?[{["'\w])/g,"")}});var x=_(q=>{a();"use strict";var we=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});var v=we(require("fs")),b=M(),Se={mkS:e=>{(0,b.checkPathSync)(e)&&v.default.mkdirSync(e,{recursive:!0})},rmS:e=>{(0,b.checkPathSync)(e)&&(process.versions.node.startsWith("12")?v.default.rmdirSync(e,{recursive:!0}):v.default.rmSync(e,{recursive:!0,force:!0}))},checkS:e=>v.default.existsSync(e),mk:async(e,t)=>{await(0,b.checkPath)(e)&&await v.default.promises.mkdir(e,{recursive:!0}),t==null||t()},rm:async(e,t)=>{await(0,b.checkPath)(e)&&(process.versions.node.startsWith("12")?await v.default.promises.rmdir(e,{recursive:!0}):await v.default.promises.rm(e,{recursive:!0,force:!0})),t==null||t()},check:async(e,t)=>{let r=v.default.existsSync(e);return t==null||t(r),r}};q.default=Se});var te=_(F=>{a();"use strict";var ee=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F,"__esModule",{value:!0});var d=ee(j()),w=ee(A());String.load=d.default.load;String.save=d.default.save;String.loadS=d.default.loadS;String.saveS=d.default.saveS;String.loadW=d.default.loadW;String.saveW=d.default.saveW;String.prototype.save=async function(e,t){await d.default.save(e,String(this),t)};String.prototype.saveS=function(e){d.default.saveS(e,String(this))};String.prototype.saveW=async function(e,t){await d.default.saveW(e,String(this),t)};JSON.load=w.default.load;JSON.save=w.default.save;JSON.loadS=w.default.loadS;JSON.saveS=w.default.saveS;JSON.loadW=w.default.loadW;JSON.saveW=w.default.saveW});a();"use strict";var N=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.Method=exports.Buf=exports.File=exports.Dir=exports.Json=void 0;var re=N(H());exports.Buf=re.default;var U=N(j());exports.File=U.default;var se=N(A());exports.Json=se.default;var ae=N(x());exports.Dir=ae.default;te();var me=Object.assign({json:se.default,file:U.default,dir:ae.default,buf:re.default},U.default);exports.default=me;var pe=m();Object.defineProperty(exports,"Method",{enumerable:!0,get:function(){return pe.Method}});
